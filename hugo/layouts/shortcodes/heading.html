{{ $cur := .Page.Params.slug }}

<div>
  {{ if .Page.Params.parents }}
    <p>Parents: 
      {{ partial "heading-parents.html" (dict "context" .Page.Params) }}
    </p>
  {{ end }}

  {{ if .Page.Params.see_headings }}
    <h4>See:</h4>
    <ul>
      {{ range .Page.Params.see_headings }}
        <li><a href="../{{ .slug }}/">{{ .text }}</a></li>
      {{ end }}
    </ul>     
  {{ end }}

  {{ if .Page.Params.children }}
    <h4>Subheadings:</h4>
    <ul>
      {{ range .Page.Params.children }}
        <li><a href="{{ .slug }}/">{{ .text }}</a></li>
      {{ end }}
    </ul>
  {{ end }}

  {{ if .Page.Params.seealso_headings }}
  <h4>See also:</h4>
  <ul>
    {{ range .Page.Params.seealso_headings }}
      <li><a href="../{{ .slug }}/">{{ .heading }}</a></li>
    {{ end }}
  </ul>
  {{ end }}
</div>

{{ if .Page.Params.abstracts }}
  <p>Abstracts: {{ .Page.Params.count }}</p>

  {{  $prevsub1 :=  "" }}
  {{  $prevsub2 :=  "" }}

  <h3>Abstracts</h3>

  {{ range .Page.Params.abstracts }}
    {{ partial "abstract.html" (dict "context" . "thisdir" "headings/") }}
  {{ end }}
{{ end }}